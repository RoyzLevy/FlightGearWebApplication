
@*@{
    ViewBag.isNetworkDisplay = "display";
}*@

<html>
<body>

    @*<style>
        img {
            max-width: 100%;
            max-height: 100%;
        }
    </style>

    <img src="~/Resources/export-map-share.png" />*@

    <p>Lat is:</p>

    <p type="text" id="Lat" size="5"></p>
    <p type="text" id="Lon" size="5"></p>

</body>
</html>


<script>
    var isNetworkDisplay = @Session["isNetworkDisplay"];
    if (isNetworkDisplay == "1") {
        alert("NETWORK!");

        var IntervalTime = @Session["time"] * 1000
        drawPlanePath = (function () {
            $.post("@Url.Action("GetNetworkXML")").done(function (xml) {
                var xmlDoc = $.parseXML(xml),
                $xml = $(xmlDoc),
                NetworkLat = $xml.find("Lat").text();
                NetworkLon = $xml.find("Lon").text();
                $("#Lat").text(NetworkLat);
                $("#Lon").text(NetworkLon);
            });
        });
        setInterval(drawPlanePath, IntervalTime);
        drawPlanePath();
    }
    else {
        alert("FROM FILE!");
        var IntervalTime = @Session["time"] * 1000
        var isFileEnd = @Session["isFileEnd"];
        function drawPlanePathFile() {
            isFileEnd = @Session["isFileEnd"];
            alert("in script func");
            if (isFileEnd == "1") {
                alert("file end");
                clearInterval(functionIntervalId);
                $.post("@Url.Action("CloseFileRead")");
            }
            $.post("@Url.Action("GetInfoModelXML")").done(function (xml) {
                var xmlDoc = $.parseXML(xml),
                $xml = $(xmlDoc),
                ModelLat = $xml.find("Lat").text();
                ModelLon = $xml.find("Lon").text();
                $("#Lat").text(ModelLat);
                $("#Lon").text(ModelLon);
            });
        }
        var functionIntervalId = setInterval(drawPlanePathFile, IntervalTime);
        drawPlanePathFile();
    }
</script>

